#!/usr/bin/env bash
SCRIPTPATH="$( cd "$(dirname "$0")" ; pwd -P )"
export
echo $SCRIPTPATH
# install nvm, npm, node 6.5.0 
echo "" && echo "Install Node ---- "
chmod +x ${SCRIPTPATH}/../src/install-node.sh
${SCRIPTPATH}/../src/install-node.sh

#install serverless framework
echo "" && echo "Install Serverless npm package ---"
npm install -g serverless

# install deployer command line tool
echo "" && echo "install deployer cli tool"
pushd ${SCRIPTPATH}/../src/deployer && npm install -g


# deploy app to lambda
echo "" && echo "Call deployer on the app directory"
node index.js --path $1 --runtime nodejs6.10